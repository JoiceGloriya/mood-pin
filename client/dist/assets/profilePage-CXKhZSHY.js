import{j as e,L as u,I as i,b as l,d as m,r as f,e as p}from"./index-Dr6qg4Oc.js";import{G as h}from"./gallery-DReN6xP0.js";import{a as c,u as x}from"./useMutation-Dog5F7DR.js";import{f as g}from"./index-BojVbZw0.js";import"./useBaseQuery-CfZD754Q.js";const j=({userId:r})=>{const{isPending:o,error:t,data:n}=c({queryKey:["boards",r],queryFn:()=>l.get(`/boards/${r}`).then(s=>s.data)});return o?"Loading...":t?"An error has occurred: "+t.message:(console.log(n),e.jsx("div",{className:"collections",children:n==null?void 0:n.map(s=>e.jsxs(u,{to:`/search?boardId=${s._id}`,className:"collection",children:[e.jsx(i,{path:s.firstPin.media,alt:""}),e.jsxs("div",{className:"collectionInfo",children:[e.jsx("h1",{children:s.title}),e.jsxs("span",{children:[s.pinCount," Pins Â· ",g(s.createdAt)]})]})]},s._id))}))},v=async r=>(await l.post(`/users/follow/${r}`)).data,y=({isFollowing:r,username:o})=>{const t=m(),n=x({mutationFn:v,onSuccess:()=>{t.invalidateQueries({queryKey:["profile",o]})}});return e.jsx("button",{onClick:()=>n.mutate(o),disabled:n.isPending,children:r?"Unfollow":"Follow"})},F=()=>{const[r,o]=f.useState("saved"),{username:t}=p(),{isPending:n,error:s,data:a}=c({queryKey:["profile",t],queryFn:()=>l.get(`/users/${t}`).then(d=>d.data)});return n?"Loading...":s?"An error has occurred: "+s.message:a?e.jsxs("div",{className:"profilePage",children:[e.jsx(i,{className:"profileImg",w:100,h:100,src:a.img||"/general/noAvatar.png"}),e.jsx("h1",{className:"profileName",children:a.displayName}),e.jsxs("span",{className:"profileUsername",children:["@",a.username]}),e.jsxs("div",{className:"followCounts",children:[a.followerCount," followers . ",a.followingCount," followings"]}),e.jsxs("div",{className:"profileInteractions",children:[e.jsx(i,{path:"/general/share.svg"}),e.jsxs("div",{className:"profileButtons",children:[e.jsx("button",{children:"Message"}),e.jsx(y,{isFollowing:a.isFollowing,username:a.username})]}),e.jsx(i,{path:"/general/more.svg"})]}),e.jsxs("div",{className:"profileOptions",children:[e.jsx("span",{onClick:()=>o("created"),className:r==="created"?"active":"",children:"Created"}),e.jsx("span",{onClick:()=>o("saved"),className:r==="saved"?"active":"",children:"Saved"})]}),r==="created"?e.jsx(h,{userId:a._id}):e.jsx(j,{userId:a._id})]}):"User not found!"};export{F as default};
